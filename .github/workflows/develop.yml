name: CI/CD DEVELOP

on:
  push:
    branches: [develop]
  pull_request:
    branches: [ develop ]
    
jobs:
  CI:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy
        uses: actions/setup-node@v2
  CD:
    needs: [CI]
    runs-on: ubuntu-latest
    steps:   
      - name: ssh deploy
      # You may pin to the exact commit or the version.
      # uses: easingthemes/ssh-deploy@c711f2c3391cac2876bf4c833590077f02e4bcb8
        uses: easingthemes/ssh-deploy@v2.2.11
        with:
          # Private Key
          SSH_PRIVATE_KEY: ${{secrets.KEY}}
          # Remote host
          REMOTE_HOST: ${{secrets.HOST}}
          # Remote user
          REMOTE_USER: ${{secrets.USERNAME}}
          # Remote port
          # REMOTE_PORT: ${{secrets.PORT}}
          # Source directory
          #SOURCE: # optional, default is 
          script: sh KapiPay/deploy.sh
              # Target directory
               # TARGET: # optional, default is /home/REMOTE_USER/
              # Arguments to pass to rsync
             # ARGS: # optional, default is -rltgoDzvO
              # An array of folder to exclude
             # EXCLUDE: # optional, default is 
              
              #//////
              # - name: executing remote ssh commands using ssh key
        # uses: appleboy/ssh-action@master
       # uses: cross-the-world/ssh-scp-ssh-pipelines@v1.1.4
      #  with:
         # host: ${{secrets.HOST}}
         # user: ${{secrets.USERNAME}}
         # key: ${{secrets.KEY}} 
          # port: ${{secrets.PORT}} 
         # script: sh KapiPay/deploy.sh

             

